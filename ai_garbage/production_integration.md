# Production Architecture: Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ ML-ÑĞµÑ€Ğ²Ğ¸ÑĞ° Ñ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğ¾Ğ¹

## ğŸ¯ ĞšĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚

**Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹:** Reddit-Ğ¿Ğ¾Ğ´Ğ¾Ğ±Ğ½Ğ°Ñ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğ° Ñ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ½Ğ¾Ğ¹ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ¾Ğ¹

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°:** Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ML-ÑĞµÑ€Ğ²Ğ¸Ñ Ñ‚Ğ¾ĞºÑĞ¸Ñ‡Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ² Ğ¿Ğ¾Ñ‚Ğ¾Ğº Ğ¼Ğ¾Ğ´ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸ĞµĞ²

---

## ğŸ—ï¸ Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ñ‹ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸

### Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ 1: Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ñ‹Ğ¹ Ğ²Ñ‹Ğ·Ğ¾Ğ² (Pre-posting Moderation) â­

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User       â”‚â”€â”€â”€â”€â–¶â”‚  Comments       â”‚â”€â”€â”€â”€â–¶â”‚  ML Toxic       â”‚
â”‚   (Browser)  â”‚     â”‚  Service        â”‚     â”‚  Detection      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â–²                      â”‚                      â”‚
       â”‚                      â”‚                      â”‚
       â”‚   Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚          â”‚   Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ             â”‚  ĞŸÑ€ĞµĞ´ÑĞºĞ°Ğ·Ğ°Ğ½Ğ¸Ğµ
       â”‚   (Allow/Block)      â”‚   (Ñ‚ĞµĞºÑÑ‚)            â”‚  (toxic_score)
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ĞŸĞ¾Ñ‚Ğ¾Ğº:**
1. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¿Ğ¸ÑˆĞµÑ‚ ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¹ â†’ Ğ½Ğ°Ğ¶Ğ¸Ğ¼Ğ°ĞµÑ‚ "ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ"
2. Comments Service Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ñ‚ĞµĞºÑÑ‚ Ğ² ML ÑĞµÑ€Ğ²Ğ¸Ñ
3. ML ÑĞµÑ€Ğ²Ğ¸Ñ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ `toxic_score`
4. Comments Service Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ (block/flag/allow)
5. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ (Ğ¾Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºĞ¾Ğ²Ğ°Ğ½Ğ¾ / Ğ¾Ñ‚ĞºĞ»Ğ¾Ğ½ĞµĞ½Ğ¾)

**ĞŸĞ»ÑÑÑ‹:**
- âœ… Ğ¢Ğ¾ĞºÑĞ¸Ñ‡Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ Ğ½Ğµ Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºÑƒĞµÑ‚ÑÑ
- âœ… ĞŸÑ€Ğ¾ÑÑ‚Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° (ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ñ‹Ğ¹ REST/gRPC)
- âœ… ĞœĞ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ğ°Ñ Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½Ğ°Ñ ÑĞ²ÑĞ·ÑŒ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ

**ĞœĞ¸Ğ½ÑƒÑÑ‹:**
- âš ï¸ Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ·Ğ°Ğ´ĞµÑ€Ğ¶ĞºÑƒ Ğº Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑƒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ (ML inference time)
- âš ï¸ ML ÑĞµÑ€Ğ²Ğ¸Ñ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ±Ñ‹Ñ‚ÑŒ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ Ğ²ÑĞµĞ³Ğ´Ğ° (high availability)
- âš ï¸ ĞŸÑ€Ğ¸ Ğ¿Ğ¸ĞºĞ¾Ğ²Ğ¾Ğ¹ Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞµ â€” Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ Ğ¸Ğ»Ğ¸ Ğ¾Ñ‚ĞºĞ°Ğ·

**SLA Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:**
- Latency: p99 < 500ms (Ğ¸Ğ½Ğ°Ñ‡Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¶Ğ´Ñ‘Ñ‚ Ğ´Ğ¾Ğ»Ğ³Ğ¾)
- Availability: 99.9% uptime
- Throughput: Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚ Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, 1000 req/sec)

---

### Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ 2: ĞÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ñ‹Ğ¹ Ğ²Ñ‹Ğ·Ğ¾Ğ² (Post-posting Moderation) â­â­

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User       â”‚â”€â”€â”€â”€â–¶â”‚  Comments       â”‚     â”‚  Message        â”‚
â”‚   (Browser)  â”‚     â”‚  Service        â”‚     â”‚  Queue          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  (Kafka/Rabbit) â”‚
       â–²                      â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                      â”‚                       â”‚
       â”‚   "ĞĞ¿ÑƒĞ±Ğ»Ğ¸ĞºĞ¾Ğ²Ğ°Ğ½Ğ¾"     â”‚  ĞŸÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ           â”‚  consume
       â”‚   (ÑÑ€Ğ°Ğ·Ñƒ)            â”‚  (ÑÑ€Ğ°Ğ·Ñƒ)              â–¼
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                              â”‚  ML Toxic       â”‚
                                              â”‚  Detection      â”‚
                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                       â”‚
                                                       â–¼
                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                              â”‚  Decision       â”‚
                                              â”‚  Service        â”‚
                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                       â”‚
                                                       â–¼
                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                              â”‚  Comments       â”‚
                                              â”‚  Service        â”‚
                                              â”‚  (ÑĞºÑ€Ñ‹Ñ‚ÑŒ/Ñ„Ğ»Ğ°Ğ³)  â”‚
                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ĞŸĞ¾Ñ‚Ğ¾Ğº:**
1. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¿Ğ¸ÑˆĞµÑ‚ ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¹ â†’ Ğ½Ğ°Ğ¶Ğ¸Ğ¼Ğ°ĞµÑ‚ "ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ"
2. Comments Service Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºÑƒĞµÑ‚ ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¹ **ÑÑ€Ğ°Ğ·Ñƒ**
3. Comments Service Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ Ğ² Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ (Kafka/RabbitMQ)
4. ML ÑĞµÑ€Ğ²Ğ¸Ñ Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ»ÑĞµÑ‚ Ğ¸Ğ· Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ¸, Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾
5. Decision Service Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ
6. Ğ•ÑĞ»Ğ¸ Ñ‚Ğ¾ĞºÑĞ¸Ñ‡Ğ½Ñ‹Ğ¹ â†’ ÑĞºÑ€Ñ‹Ñ‚ÑŒ / Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ½Ğ° Ğ¼Ğ¾Ğ´ĞµÑ€Ğ°Ñ†Ğ¸Ñ

**ĞŸĞ»ÑÑÑ‹:**
- âœ… ĞĞµÑ‚ Ğ·Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ¸ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ (Ğ¼Ğ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ğ°Ñ Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ)
- âœ… ML ÑĞµÑ€Ğ²Ğ¸Ñ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°Ñ‚ÑŒ Ğ±Ğ°Ñ‚Ñ‡Ğ°Ğ¼Ğ¸ (Ğ²Ñ‹ÑˆĞµ throughput)
- âœ… ĞÑ‚ĞºĞ°Ğ·Ğ¾ÑƒÑÑ‚Ğ¾Ğ¹Ñ‡Ğ¸Ğ²Ğ¾ÑÑ‚ÑŒ (Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ Ğ±ÑƒÑ„ĞµÑ€Ğ¸Ğ·ÑƒĞµÑ‚ Ğ¿Ñ€Ğ¸ ÑĞ±Ğ¾ÑÑ… ML)
- âœ… ĞœĞ¾Ğ¶Ğ½Ğ¾ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ML ÑĞµÑ€Ğ²Ğ¸Ñ Ğ½ĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾

**ĞœĞ¸Ğ½ÑƒÑÑ‹:**
- âš ï¸ Ğ¢Ğ¾ĞºÑĞ¸Ñ‡Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ Ğ²Ğ¸Ğ´ĞµĞ½ ĞºĞ°ĞºĞ¾Ğµ-Ñ‚Ğ¾ Ğ²Ñ€ĞµĞ¼Ñ (Ğ¿Ğ¾ĞºĞ° Ğ½Ğµ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ÑÑ)
- âš ï¸ Ğ¡Ğ»Ğ¾Ğ¶Ğ½ĞµĞµ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° (Ğ½ÑƒĞ¶Ğ½Ğ° Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ, event-driven)
- âš ï¸ ĞÑƒĞ¶ĞµĞ½ Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼ "Ğ¾Ñ‚ĞºĞ°Ñ‚Ğ°" (ÑĞºÑ€Ñ‹Ñ‚ÑŒ ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¹ Ğ¿Ğ¾ÑÑ‚Ñ„Ğ°ĞºÑ‚ÑƒĞ¼)

**SLA Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:**
- ML inference latency: p99 < 2 ÑĞµĞº (Ğ½Ğµ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¾ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ)
- End-to-end processing: < 1 Ğ¼Ğ¸Ğ½ (Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾ ÑĞºÑ€Ñ‹Ñ‚ÑŒ Ñ‚Ğ¾ĞºÑĞ¸Ñ‡Ğ½Ñ‹Ğ¹)
- Queue retention: 24 Ñ‡Ğ°ÑĞ° (Ğ½Ğ° ÑĞ»ÑƒÑ‡Ğ°Ğ¹ ÑĞ±Ğ¾ĞµĞ²)

---

### Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ 3: Ğ“Ğ¸Ğ±Ñ€Ğ¸Ğ´Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´ (Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµÑ‚ÑÑ Ğ´Ğ»Ñ production) â­â­â­

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   User Comment  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   API Gateway            â”‚
              â”‚   (Rate Limiting, Auth)  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   Comments Service       â”‚
              â”‚                          â”‚
              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
              â”‚  â”‚ Fast Check         â”‚  â”‚
              â”‚  â”‚ (ÑĞ²Ñ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸)        â”‚  â”‚
              â”‚  â”‚ - URL?             â”‚  â”‚
              â”‚  â”‚ - CAPS?            â”‚  â”‚
              â”‚  â”‚ - Spam patterns?   â”‚  â”‚
              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                               â”‚
          â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Obvious Block   â”‚            â”‚  ML Inference    â”‚
â”‚  (ÑĞ¿Ğ°Ğ¼, ÑĞ²Ğ½Ñ‹Ğ¹    â”‚            â”‚  (Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾)    â”‚
â”‚  Ñ‚Ğ¾ĞºÑĞ¸Ğº)         â”‚            â”‚                  â”‚
â”‚                  â”‚            â”‚                  â”‚
â”‚  â†’ Block ÑÑ€Ğ°Ğ·Ñƒ   â”‚            â”‚  â†’ Queue         â”‚
â”‚                  â”‚            â”‚  â†’ ML Service    â”‚
â”‚                  â”‚            â”‚  â†’ Decision      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ĞŸĞ¾Ñ‚Ğ¾Ğº:**
1. **Ğ‘Ñ‹ÑÑ‚Ñ€Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° (ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾, <50ms):**
   - Ğ­Ğ²Ñ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸: URL, CAPS, ÑĞ¿Ğ°Ğ¼-Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹, Ñ‡Ñ‘Ñ€Ğ½Ñ‹Ğµ ÑĞ¿Ğ¸ÑĞºĞ¸
   - Ğ•ÑĞ»Ğ¸ ÑĞ²Ğ½Ñ‹Ğ¹ ÑĞ¿Ğ°Ğ¼/Ñ‚Ğ¾ĞºÑĞ¸Ğº â†’ Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑÑ€Ğ°Ğ·Ñƒ
   - Ğ•ÑĞ»Ğ¸ Ñ‡Ğ¸ÑÑ‚Ğ¾ â†’ Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºĞ¾Ğ²Ğ°Ñ‚ÑŒ + Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ½Ğ° ML Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·

2. **ML Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· (Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾):**
   - ML ÑĞµÑ€Ğ²Ğ¸Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ±Ğ°Ñ‚Ñ‡ ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸ĞµĞ²
   - Decision Service Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ
   - Ğ•ÑĞ»Ğ¸ Ñ‚Ğ¾ĞºÑĞ¸Ñ‡Ğ½Ñ‹Ğ¹ â†’ ÑĞºÑ€Ñ‹Ñ‚ÑŒ / Ñ„Ğ»Ğ°Ğ³ Ğ¼Ğ¾Ğ´ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€Ñƒ

**ĞŸĞ»ÑÑÑ‹:**
- âœ… Ğ¯Ğ²Ğ½Ñ‹Ğ¹ ÑĞ¿Ğ°Ğ¼/Ñ‚Ğ¾ĞºÑĞ¸Ğº Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ¼Ğ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ğ¾
- âœ… ML Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾ (Ğ½ĞµÑ‚ Ğ·Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ¸)
- âœ… ML ÑĞµÑ€Ğ²Ğ¸Ñ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°Ñ‚ÑŒ Ğ±Ğ°Ñ‚Ñ‡Ğ°Ğ¼Ğ¸ (Ğ´ĞµÑˆĞµĞ²Ğ»Ğµ)
- âœ… ĞÑ‚ĞºĞ°Ğ·Ğ¾ÑƒÑÑ‚Ğ¾Ğ¹Ñ‡Ğ¸Ğ²Ğ¾ÑÑ‚ÑŒ (Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ Ğ±ÑƒÑ„ĞµÑ€Ğ¸Ğ·ÑƒĞµÑ‚)

**ĞœĞ¸Ğ½ÑƒÑÑ‹:**
- âš ï¸ Ğ¡Ğ»Ğ¾Ğ¶Ğ½ĞµĞµ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ (2 ÑƒÑ€Ğ¾Ğ²Ğ½Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸)
- âš ï¸ ĞÑƒĞ¶Ğ½Ğ° Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ + ML ÑĞµÑ€Ğ²Ğ¸Ñ + Decision Service

---

## ğŸ“Š Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ¾Ğ²

| ĞšÑ€Ğ¸Ñ‚ĞµÑ€Ğ¸Ğ¹ | Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ñ‹Ğ¹ | ĞÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ñ‹Ğ¹ | Ğ“Ğ¸Ğ±Ñ€Ğ¸Ğ´Ğ½Ñ‹Ğ¹ |
|----------|------------|-------------|-----------|
| **Ğ—Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ** | Ğ’Ñ‹ÑĞ¾ĞºĞ°Ñ (ML latency) | ĞĞ¸Ğ·ĞºĞ°Ñ (0ms) | ĞĞ¸Ğ·ĞºĞ°Ñ (ÑĞ²Ñ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸ <50ms) |
| **Ğ¢Ğ¾ĞºÑĞ¸Ñ‡Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ Ğ²Ğ¸Ğ´ĞµĞ½** | ĞĞµÑ‚ | Ğ”Ğ° (Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾) | Ğ§Ğ°ÑÑ‚Ğ¸Ñ‡Ğ½Ğ¾ (ML Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾) |
| **Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹** | ĞĞ¸Ğ·ĞºĞ°Ñ | Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ | Ğ’Ñ‹ÑĞ¾ĞºĞ°Ñ |
| **ĞÑ‚ĞºĞ°Ğ·Ğ¾ÑƒÑÑ‚Ğ¾Ğ¹Ñ‡Ğ¸Ğ²Ğ¾ÑÑ‚ÑŒ** | ĞĞ¸Ğ·ĞºĞ°Ñ | Ğ’Ñ‹ÑĞ¾ĞºĞ°Ñ | Ğ’Ñ‹ÑĞ¾ĞºĞ°Ñ |
| **Ğ¡Ñ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ** | ĞĞ¸Ğ·ĞºĞ°Ñ | Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ | Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ |
| **Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ñ** | Ğ”Ğ»Ñ v1 / MVP | Ğ”Ğ»Ñ production | Ğ”Ğ»Ñ production â­ |

---

## ğŸ—ï¸ Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° (Ğ“Ğ¸Ğ±Ñ€Ğ¸Ğ´Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´)

### ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            REDDIT-LIKE PLATFORM                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â”‚ 1. POST /api/comments
                                      â”‚ {post_id, text, parent_id}
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            API GATEWAY                                   â”‚
â”‚  - ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ (JWT)                                                 â”‚
â”‚  - Rate Limiting (100 req/min per user)                                 â”‚
â”‚  - Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â”‚ 2. Forward request
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         COMMENTS SERVICE                                 â”‚
â”‚  (ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸ÑĞ¼Ğ¸)                                 â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    FAST CHECK (ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾)                      â”‚    â”‚
â”‚  â”‚                                                                â”‚    â”‚
â”‚  â”‚  if has_url(text) AND user_age < 1 day:                        â”‚    â”‚
â”‚  â”‚    return BLOCK("Spam: new user with URL")                     â”‚    â”‚
â”‚  â”‚                                                                â”‚    â”‚
â”‚  â”‚  if caps_ratio(text) > 0.8:                                    â”‚    â”‚
â”‚  â”‚    return BLOCK("Spam: excessive CAPS")                        â”‚    â”‚
â”‚  â”‚                                                                â”‚    â”‚
â”‚  â”‚  if text in blacklist:                                         â”‚    â”‚
â”‚  â”‚    return BLOCK("Blacklisted content")                         â”‚    â”‚
â”‚  â”‚                                                                â”‚    â”‚
â”‚  â”‚  # Passed fast check â†’ publish + send to ML                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                                   â”‚
                    â”‚ 3a. Publish comment              â”‚ 3b. Send to queue
                    â”‚ (ÑÑ€Ğ°Ğ·Ñƒ Ğ² Ğ‘Ğ”)                     â”‚ (Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾)
                    â–¼                                   â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   PostgreSQL      â”‚              â”‚   Kafka Topic                 â”‚
        â”‚   comments table  â”‚              â”‚   comments.moderation_queue   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                           â”‚
                                                           â”‚ 4. Consume batch
                                                           â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                      ML INFERENCE SERVICE                        â”‚
        â”‚  (ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸Ñ Ñ‚Ğ¾ĞºÑĞ¸Ñ‡Ğ½Ğ¾ÑÑ‚Ğ¸)                                       â”‚
        â”‚                                                                   â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
        â”‚  â”‚  Batch Processing (Ñ€Ğ°Ğ·Ğ¼ĞµÑ€ Ğ±Ğ°Ñ‚Ñ‡Ğ°: 32-128 ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸ĞµĞ²)      â”‚  â”‚
        â”‚  â”‚                                                             â”‚  â”‚
        â”‚  â”‚  for comment in batch:                                      â”‚  â”‚
        â”‚  â”‚    features = tfidf.transform(comment.text)                 â”‚  â”‚
        â”‚  â”‚    score = model.predict_proba(features)[0][1]              â”‚  â”‚
        â”‚  â”‚    results.append({comment_id, score})                      â”‚  â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                           â”‚
                                                           â”‚ 5. Results
                                                           â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                      DECISION SERVICE                            â”‚
        â”‚                                                                   â”‚
        â”‚  for result in results:                                           â”‚
        â”‚    if result.score > 0.70:                                        â”‚
        â”‚      action = "HIDE"                                              â”‚
        â”‚    elif result.score > 0.40:                                      â”‚
        â”‚      action = "FLAG_FOR_REVIEW"                                   â”‚
        â”‚    else:                                                          â”‚
        â”‚      action = "ALLOW"                                             â”‚
        â”‚                                                                   â”‚
        â”‚  # Send action to Comments Service                                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                           â”‚
                                                           â”‚ 6. Apply action
                                                           â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                      COMMENTS SERVICE                            â”‚
        â”‚                                                                   â”‚
        â”‚  if action == "HIDE":                                             â”‚
        â”‚    UPDATE comments SET is_hidden=true WHERE id=comment_id         â”‚
        â”‚    NOTIFY user(comment.author, "Comment hidden: toxic content")   â”‚
        â”‚                                                                   â”‚
        â”‚  elif action == "FLAG_FOR_REVIEW":                                â”‚
        â”‚    INSERT INTO moderation_queue (comment_id, reason)              â”‚
        â”‚                                                                   â”‚
        â”‚  else:                                                            â”‚
        â”‚    # No action needed (already published)                         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸ Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ°

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ | ĞĞ±Ğ¾ÑĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ |
|-----------|------------|-------------|
| **API Gateway** | Kong / AWS API Gateway / Traefik | Rate limiting, auth, routing |
| **Comments Service** | Python (FastAPI) / Go / Node.js | ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ½Ğ°Ñ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° |
| **Database** | PostgreSQL | Ğ ĞµĞ»ÑÑ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ (ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¸, Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸) |
| **Message Queue** | Kafka / RabbitMQ / AWS SQS | ĞÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ°Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°, Ğ±ÑƒÑ„ĞµÑ€ |
| **ML Service** | Python (FastAPI) + Scikit-learn / PyTorch | Ğ˜Ğ½Ñ„ĞµÑ€ĞµĞ½Ñ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ |
| **ML Serving** | Seldon Core / KServe / TorchServe | Production serving (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾) |
| **Decision Service** | Python (FastAPI) / Rules Engine | Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ° |
| **Cache** | Redis | ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ‡Ğ°ÑÑ‚Ñ‹Ñ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² |
| **Monitoring** | Prometheus + Grafana | ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸, Ğ°Ğ»ĞµÑ€Ñ‚Ñ‹ |
| **Logging** | ELK Stack (Elasticsearch, Logstash, Kibana) | Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ»Ğ¾Ğ³Ğ¸ |

---

## ğŸ“¦ Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ñ‹ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹

### 3b. Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ² Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ (Kafka):

```json
{
  "event_type": "comment_published",
  "timestamp": "2026-02-17T10:30:00Z",
  "data": {
    "comment_id": "abc123",
    "post_id": "post456",
    "author_id": "user789",
    "text": "Your comment text here...",
    "created_at": "2026-02-17T10:30:00Z"
  }
}
```

### 5. Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ ML Ğ¸Ğ½Ñ„ĞµÑ€ĞµĞ½ÑĞ°:

```json
{
  "event_type": "toxicity_analysis",
  "timestamp": "2026-02-17T10:30:02Z",
  "data": {
    "comment_id": "abc123",
    "toxic_score": 0.87,
    "toxic_class": "toxic",
    "confidence": 0.92,
    "model_version": "v1.0"
  }
}
```

### 6. Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ (Decision):

```json
{
  "event_type": "moderation_decision",
  "timestamp": "2026-02-17T10:30:03Z",
  "data": {
    "comment_id": "abc123",
    "action": "HIDE",
    "reason": "toxic_content",
    "toxic_score": 0.87,
    "moderator_id": null
  }
}
```

---

## ğŸ“ˆ ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ML ÑĞµÑ€Ğ²Ğ¸ÑĞ°

### Ğ‘Ğ°Ñ‚Ñ‡ Ğ¸Ğ½Ñ„ĞµÑ€ĞµĞ½Ñ (Ğ´Ğ»Ñ throughput):

```python
# ML Service: Batch processing

class ToxicInferenceService:
    def __init__(self, batch_size=64, max_wait_ms=500):
        self.batch_size = batch_size
        self.max_wait_ms = max_wait_ms
        self.batch_queue = []
        self.lock = threading.Lock()
    
    async def process_batch(self):
        while True:
            await asyncio.sleep(self.max_wait_ms / 1000)
            
            with self.lock:
                if not self.batch_queue:
                    continue
                batch = self.batch_queue[:self.batch_size]
                self.batch_queue = self.batch_queue[self.batch_size:]
            
            # Ğ’ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ±Ğ°Ñ‚Ñ‡Ğ°
            texts = [item['text'] for item in batch]
            features = self.tfidf.transform(texts)
            
            # ĞŸÑ€ĞµĞ´ÑĞºĞ°Ğ·Ğ°Ğ½Ğ¸Ğµ
            scores = self.model.predict_proba(features)[:, 1]
            
            # ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²
            for item, score in zip(batch, scores):
                await self.send_result(item['comment_id'], score)
```

**ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ° Ğ±Ğ°Ñ‚Ñ‡Ğ°:**
- âœ… Ğ’ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ÑÑ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½ĞµĞµ Ğ½Ğ° Ğ±Ğ°Ñ‚Ñ‡Ğµ (TF-IDF, BERT)
- âœ… GPU utilization (ĞµÑĞ»Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ)
- âœ… ĞœĞµĞ½ÑŒÑˆĞµ Ğ½Ğ°ĞºĞ»Ğ°Ğ´Ğ½Ñ‹Ñ… Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ğ¾Ğ² Ğ½Ğ° Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ

**ĞĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚ĞºĞ¸:**
- âš ï¸ Ğ—Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ½Ğ° Ñ„Ğ¾Ñ€Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ±Ğ°Ñ‚Ñ‡Ğ° (max_wait_ms)
- âš ï¸ Ğ¡Ğ»Ğ¾Ğ¶Ğ½ĞµĞµ Ğ¾Ñ‚Ğ»Ğ°Ğ´ĞºĞ°

---

## ğŸ” Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ

### 1. ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ğ¼ĞµĞ¶Ğ´Ñƒ ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ğ¼Ğ¸:

```yaml
# API Gateway â†’ Comments Service
Authorization: Bearer <JWT_TOKEN>

# Comments Service â†’ ML Service
X-Service-Token: <SERVICE_API_KEY>
```

### 2. Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ²Ñ…Ğ¾Ğ´Ğ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:

```python
# ML Service: Input validation

from pydantic import BaseModel, validator

class InferenceRequest(BaseModel):
    comment_id: str
    text: str
    
    @validator('text')
    def validate_text(cls, v):
        if not v or len(v.strip()) == 0:
            raise ValueError("Text cannot be empty")
        if len(v) > 10000:
            raise ValueError("Text too long (max 10000 chars)")
        return v
```

### 3. Rate Limiting:

```python
# ML Service: Rate limiting

from fastapi_limiter import FastAPILimiter
from fastapi_limiter.depends import RateLimiter

@app.post("/api/v1/predict", dependencies=[Depends(RateLimiter(times=100, seconds=60))])
async def predict(request: InferenceRequest):
    ...
```

---

## ğŸ“Š ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ ML ÑĞµÑ€Ğ²Ğ¸ÑĞ°

### ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ Ğ´Ğ»Ñ ÑĞ±Ğ¾Ñ€Ğ°:

```python
# ML Service: Metrics

from prometheus_client import Counter, Histogram, Gauge

# ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
INFERENCE_REQUESTS = Counter(
    'ml_inference_requests_total',
    'Total inference requests',
    ['status']  # success, error
)

# Ğ’Ñ€ĞµĞ¼Ñ Ğ¸Ğ½Ñ„ĞµÑ€ĞµĞ½ÑĞ°
INFERENCE_LATENCY = Histogram(
    'ml_inference_latency_seconds',
    'Inference latency',
    buckets=[0.01, 0.05, 0.1, 0.25, 0.5, 1.0, 2.5, 5.0]
)

# Ğ Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€ĞµĞ´ÑĞºĞ°Ğ·Ğ°Ğ½Ğ¸Ğ¹
TOXIC_SCORE = Histogram(
    'ml_toxic_score',
    'Distribution of toxic scores',
    buckets=[0.0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0]
)

# Ğ Ğ°Ğ·Ğ¼ĞµÑ€ Ğ±Ğ°Ñ‚Ñ‡Ğ°
BATCH_SIZE = Gauge(
    'ml_batch_size',
    'Current batch size'
)
```

### Ğ”Ğ°ÑˆĞ±Ğ¾Ñ€Ğ´ (Grafana):

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ML Toxic Detection Dashboard                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Requests/sec: 1,234          Latency p99: 145ms                â”‚
â”‚  Error rate: 0.02%            Queue depth: 45                   â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚  Toxic Score     â”‚  â”‚  Latency         â”‚                     â”‚
â”‚  â”‚  Distribution    â”‚  â”‚  (p50, p95, p99) â”‚                     â”‚
â”‚  â”‚  [histogram]     â”‚  â”‚  [time series]   â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Decisions Over Time                                    â”‚    â”‚
â”‚  â”‚  [Allow, Flag, Block] [stacked area chart]              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš¨ ĞĞ»ĞµÑ€Ñ‚Ñ‹

| ĞĞ»ĞµÑ€Ñ‚ | Ğ£ÑĞ»Ğ¾Ğ²Ğ¸Ğµ | Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ |
|-------|---------|----------|
| **High Error Rate** | Error rate > 1% (5 min) | ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ»Ğ¾Ğ³Ğ¸ ML ÑĞµÑ€Ğ²Ğ¸ÑĞ° |
| **High Latency** | p99 latency > 500ms (5 min) | ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ML ÑĞµÑ€Ğ²Ğ¸Ñ |
| **Queue Backlog** | Queue depth > 1000 (5 min) | Ğ£Ğ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ñ‚ÑŒ batch size / Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ²Ğ¾Ñ€ĞºĞµÑ€Ñ‹ |
| **Model Drift** | Avg toxic score Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ğ»ÑÑ > 20% (1 hour) | ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ, Ğ¿ĞµÑ€ĞµĞ¾Ğ±ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ |
| **Service Down** | Health check failed (1 min) | Restart service, Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ¸Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ |

---

## ğŸ“‹ Ğ§ĞµĞº-Ğ»Ğ¸ÑÑ‚ Ğ´Ğ»Ñ Checkpoint 4 (Deployment)

- [ ] ML ÑĞµÑ€Ğ²Ğ¸Ñ ÑƒĞ¿Ğ°ĞºĞ¾Ğ²Ğ°Ğ½ Ğ² Docker ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€
- [ ] Ğ Ğ°Ğ·Ğ²Ñ‘Ñ€Ğ½ÑƒÑ‚ Ğ½Ğ° Kubernetes / Docker Swarm / Ğ¾Ğ±Ğ»Ğ°Ñ‡Ğ½Ğ¾Ğ¼ ÑĞµÑ€Ğ²Ğ¸ÑĞµ
- [ ] ĞĞ°ÑÑ‚Ñ€Ğ¾ĞµĞ½ API Gateway (FastAPI)
- [ ] Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒÑ (Kafka/RabbitMQ)
- [ ] Decision Service Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½
- [ ] ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ (Prometheus + Grafana)
- [ ] ĞĞ»ĞµÑ€Ñ‚Ñ‹ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ñ‹ (Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 5)
- [ ] Runbook Ğ½Ğ°Ğ¿Ğ¸ÑĞ°Ğ½ (Ñ‡Ñ‚Ğ¾ Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¸ Ğ°Ğ»ĞµÑ€Ñ‚Ğ°Ñ…)
- [ ] Ğ”ĞµĞ¼Ğ¾Ğ½ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ (ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¹ â†’ Ğ¼Ğ¾Ğ´ĞµÑ€Ğ°Ñ†Ğ¸Ñ)

---

## ğŸ’¡ Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ ÑƒÑ‡ĞµĞ±Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

### Ğ”Ğ»Ñ **Checkpoint 1-3** (Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸):

**Ğ£Ğ¿Ñ€Ğ¾Ñ‰Ñ‘Ğ½Ğ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°:**
```
User â†’ FastAPI â†’ ML Model â†’ Decision â†’ Response
```

- ĞĞ´Ğ¸Ğ½ ÑĞµÑ€Ğ²Ğ¸Ñ (FastAPI)
- Ğ‘ĞµĞ· Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ¸ (ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾)
- Ğ‘ĞµĞ· Ğ±Ğ°Ñ‚Ñ‡Ğ¸Ğ½Ğ³Ğ° (Ğ¾Ğ´Ğ¸Ğ½ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ = Ğ¾Ğ´Ğ½Ğ¾ Ğ¿Ñ€ĞµĞ´ÑĞºĞ°Ğ·Ğ°Ğ½Ğ¸Ğµ)
- Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğµ Ñ€Ğ°Ğ·Ğ²Ñ‘Ñ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ

### Ğ”Ğ»Ñ **Checkpoint 4** (Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹):

**Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ:**
- Docker ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€
- Ğ Ğ°Ğ·Ğ²Ñ‘Ñ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ (Heroku / AWS / GCP / Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾)
- Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ (Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸ + Ğ»Ğ¾Ğ³Ğ¸)
- 5 Ğ°Ğ»ĞµÑ€Ñ‚Ğ¾Ğ² (ÑĞ¼. Ğ²Ñ‹ÑˆĞµ)

### Ğ”Ğ»Ñ **production** (Ğ¿Ğ¾ÑĞ»Ğµ ĞºÑƒÑ€ÑĞ°):

**Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ:**
- ĞÑ‡ĞµÑ€ĞµĞ´ÑŒ (Kafka/RabbitMQ)
- Ğ‘Ğ°Ñ‚Ñ‡Ğ¸Ğ½Ğ³
- ĞÑ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Decision Service
- Kubernetes
- ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ + Ğ°Ğ»ĞµÑ€Ñ‚Ñ‹ + runbook

---

## ğŸ¯ Ğ˜Ñ‚Ğ¾Ğ³

**ĞÑ‚Ğ²ĞµÑ‚ Ğ½Ğ° Ñ‚Ğ²Ğ¾Ğ¹ Ğ²Ğ¾Ğ¿Ñ€Ğ¾Ñ:**

> "ĞšĞ°Ğº Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½ĞµĞµ ÑĞ´ĞµĞ»Ğ°Ñ‚ÑŒ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸Ñ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞ» Ğ½Ğ°ÑˆĞµĞ¹ ML Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¹?"

**Ğ”Ğ»Ñ production (Ğ³Ğ¸Ğ±Ñ€Ğ¸Ğ´Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´):**

1. **Comments Service** â†’ **Fast Check** (ÑĞ²Ñ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸, ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾)
2. **Comments Service** â†’ **Kafka Queue** â†’ **ML Service** (Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾, Ğ±Ğ°Ñ‚Ñ‡)
3. **ML Service** â†’ **Decision Service** â†’ **Comments Service** (Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ)

**Ğ”Ğ»Ñ ÑƒÑ‡ĞµĞ±Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° (v1):**

1. **Comments Service** â†’ **ML Service** (ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾, REST API)
2. **ML Service** â†’ **Decision** â†’ **Response**

---

**Ğ’Ğ¾Ğ¿Ñ€Ğ¾Ñ:** ĞšĞ°ĞºĞ¾Ğ¹ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·ÑƒĞµĞ¼ Ğ´Ğ»Ñ Checkpoint 4? Ğ£Ğ¿Ñ€Ğ¾Ñ‰Ñ‘Ğ½Ğ½Ñ‹Ğ¹ (ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ñ‹Ğ¹) Ğ¸Ğ»Ğ¸ production (Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ñ‹Ğ¹ Ñ Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒÑ)?
